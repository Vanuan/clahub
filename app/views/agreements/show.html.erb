<h1>Agreement for <%= @agreement.user_name %>/<%= @agreement.repo_name %></h1>

<p><%= @agreement.text %></p>

<% if signed_in? %>
  <% if @agreement.signed_by?(current_user) %>
    <p>You have signed this CLA.</p>
  <% else %>
    <%= link_to 'I agree', agreement_signature_path(user_name: @agreement.user_name, repo_name: @agreement.repo_name), method: :post %>
  <% end %>
<% else %>
  <p><a class="btn btn-primary btn-large" href="/auth/github">Sign in with GitHub to agree to this CLA &raquo;</a></p>
<% end %>

<% if @agreement.owned_by?(current_user) %>
  <h2>Users who have signed the CLA</h2>
  <ul>
  <% @agreement.signing_users.each do |user| %>
    <li><%= user.nickname %></li>
  <% end %>
  </ul>
<% end %>
